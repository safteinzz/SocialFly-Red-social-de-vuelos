<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Acceso</title>
	
	
	<!--------------------------------------- CDN ------------------------------------------>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	
	<!--------------------------------------- LIBS ------------------------------------------>
	<link rel="stylesheet" href="./resources/lib/foundation-icons/foundation-icons.css" />
    <link rel="stylesheet" href="./resources/lib/bootstrap/css/bootstrap.min.css">
    <script src="./resources/lib/jquery-3.4.1.js"></script>
    <script src="./resources/lib/bootstrap/js/bootstrap.min.js"></script>

    <!--------------------------------------- SCRIPTS ------------------------------------------>
    <!-- update the version number as needed -->
    <script defer src="/__/firebase/7.14.0/firebase-app.js"></script>
    <!-- include only the Firebase features as you need -->
    <script defer src="/__/firebase/7.14.0/firebase-auth.js"></script>
    <script defer src="/__/firebase/7.14.0/firebase-database.js"></script>
    <script defer src="/__/firebase/7.14.0/firebase-messaging.js"></script>
    <script defer src="/__/firebase/7.14.0/firebase-storage.js"></script>
    <!-- initialize the SDK after all desired features are loaded -->
    <script defer src="/__/firebase/init.js"></script>

    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.14.0/firebase-app.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/7.14.0/firebase-analytics.js"></script>
    <script defer src="./resources/js/scripts.js"></script>	

    <!--------------------------------------- CSS ------------------------------------------>
    <link rel="stylesheet" type="text/css" href="./resources/css/styles.css">

</head>

<body>
    <!--------------------------------------- BODY ------------------------------------------>
	
    <div class="container-fluid px-0 fondoAcceso align-items-center px-1 d-flex align-items-center justify-content-center">
	<script>
		document.addEventListener('DOMContentLoaded', function() 
		{
			// // 游댠游댠游댠游댠游댠游댠游댠游댠游댠游댠游댠游댠游댠游댠游댠游댠游댠游댠游댠游댠游댠游댠游댠游댠游댠游댠游댠游댠游댠游댠游댠
			// // The Firebase SDK is initialized and available here!
			//
			// firebase.auth().onAuthStateChanged(user => { });
			// firebase.database().ref('/path/to/ref').on('value', snapshot => { });
			// firebase.messaging().requestPermission().then(() => { });
			// firebase.storage().ref('/path/to/ref').getDownloadURL().then(() => { });
			//
			// // 游댠游댠游댠游댠游댠游댠游댠游댠游댠游댠游댠游댠游댠游댠游댠游댠游댠游댠游댠游댠游댠游댠游댠游댠游댠游댠游댠游댠游댠游댠游댠

			try 
			{
				let app = firebase.app();
				let features = ['auth', 'database', 'messaging', 'storage'].filter(feature => typeof app[feature] === 'function');
				console.log('Firebase SDK loaded');
			} 
			catch (e) 
			{
				console.error(e);
			}
		});
    </script>
        <div class="container">
            <div class="d-flex justify-content-center h-100">
                <div class="card">
                    <div class="card-header">
                        <h3>Acceder</h3>
                        <div class="d-flex justify-content-end social_icon">
                            
                            <span id="googleLogin"><i class="fi-social-google-plus"></i></span>
								<script>
									$('#googleLogin').unbind('click').click(function () {
										login("google");
									});
								</script>
                        </div>
                    </div>
                    <div class="card-body">
                        <form>
                            <div class="input-group form-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text"><i class="fa fa-user"></i></span>
                                </div>
                                <input id="mailLogIn" type="text" class="form-control" placeholder="Email">

                            </div>
                            <div class="input-group form-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text"><i class="fa fa-key"></i></span>
                                </div>
                                <input id="passLogIn" type="password" placeholder="Contrase침a" class="form-control login">
								
                            </div>
                            <!-- <div class="row align-items-center remember"> -->
                                <!-- <input type="checkbox">Recordarme -->
                            <!-- </div> -->
                            <div class="form-group">
                                <input id="login" type="button" value="Login" class="btn float-right login_btn login">
                            </div>
								<script>
									$('#login').unbind('click').click(function () {
										//DEBUG
										var reqlength = $('.login').length; 
										console.log(reqlength);
										//--
										var value = $('.login').filter(function () {
											return this.value != '';
										});

										if (value.length>=0 && (value.length !== reqlength)) {
											alert('Tienes que rellenar todos los campos');
										} else {
											console.log('todo rellenado');
											login();
										}
									});
								</script>
                        </form>
                    </div>
                    <div class="card-footer">
                        <div class="d-flex justify-content-center links">
                            No tienes cuenta?<a href="#" data-toggle="modal" data-target="#modalRegistro">Registrate</a>
                        </div>
                        <div class="d-flex justify-content-center">
                            <a href="#" data-toggle="modal" data-target="#modalOlvidoPass">Se te olvido la contrase침a?</a>
							<script>
								//Limpiar campos por si ha cerrado y vuelto a abrir
							</script>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--------------------------------------- MODAL REGISTRO ------------------------------------------>
    <div class="modal fade" id="modalRegistro" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title text-dark" id="exampleModalLabel">Formulario de registro</h5>

                </div>
                <div class="modal-body">  
					
					<div class="input-group form-group">
						<div class="input-group-prepend">
							<span class="input-group-text"><i class="fa fa-envelope"></i></span>
						</div>
						<input id="mail" type="text" class="form-control registro" placeholder="Email" required>
					</div>
					<div class="input-group form-group">
						<div class="input-group-prepend">
							<span class="input-group-text"><i class="fa fa-key"></i></span>
						</div>
						<input id="pass" type="password" class="form-control registro" placeholder="Contrase침a" required>
					</div>
					<div class="input-group form-group">
						<div class="input-group-prepend">
							<span class="input-group-text"><i class="fa fa-lock"></i></span>
						</div>
						<input id="repitePass" type="password" class="form-control registro" placeholder="Repite contrase침a" required>
					</div>
					<div class="row align-items-center remember mt-4 text-dark">
						<input id="terminos" type="checkbox">Aceptar <a href="#" class="ml-1">Terminos y condiciones del registro</a>
					</div>                    
                </div>
                <div class="modal-footer d-flex justify-content-center">
                    <button id="registro" type="button" class="btn-lg btn-warning">Registrarse</button>
                </div>
				<script>
					$('#registro').unbind('click').click(function () {
						//DEBUG
						var reqlength = $('.registro').length; 
						console.log(reqlength);
						//--
						var value = $('.registro').filter(function () {
							return this.value != '';
						});

						if (value.length>=0 && (value.length !== reqlength)) {
							alert('Tienes que rellenar todos los campos');
						} else {
							console.log('todo rellenado');
							registroUser();						
						}
					});
				</script>
            </div>
        </div>
    </div>

    <!--------------------------------------- MODAL OLVIDO CONTRASE칌A ------------------------------------------>
    <div class="modal fade" id="modalOlvidoPass" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title text-dark" id="exampleModalLabel">Recuperaci칩n de cuenta</h5>

                </div>
                <div class="modal-body">
                    <p id="tituloRP" class="text-dark"> Introduzca a continuaci칩n su direcci칩n de correo electronico para resetear su contrase침a </p>
                    <form class="text-dark">
                        <div class="input-group form-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><i class="fa fa-envelope"></i></span>
                            </div>
                            <input id="emailOlvido" type="text" class="form-control olvidoInput" placeholder="Email">
                        </div>
                    </form>
                </div>
                <div class="modal-footer d-flex justify-content-center">
                    <button id="olvidoPass" type="button" class="btn-lg btn-warning " data-dismiss="modal">Enviar</button>
					<script>
						$('#olvidoPass').unbind('click').click(function () {
							//DEBUG
							var reqlength = $('.olvidoInput').length; 
							console.log(reqlength);
							//--
							var value = $('.olvidoInput').filter(function () {
								return this.value != '';
							});

							if (value.length>=0 && (value.length !== reqlength)) {
								alert('Tienes que rellenar el campo con tu correo');
							} else {
								<!-- console.log('todo rellenado'); -->
								resetPass(emailOlvido.value);	
								$('#modalOlvidoPass').modal('hide');
							}
						});
					</script>
                </div>
            </div>
        </div>
    </div>    
</body>

</html>